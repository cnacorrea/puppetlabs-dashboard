Listen <%= dashboard_port %>

<VirtualHost *:<%= dashboard_port %>>
  SSLEngine on
  SSLProtocol -ALL +SSLv3 +TLSv1
  SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP
  SSLCertificateFile <%= @ssldir %>/certs/<%= name %>.pem
  SSLCertificateKeyFile <%= @ssldir %>/private_keys/<%= name %>.pem
  SSLCertificateChainFile <%= @ssldir %>/certs/ca.pem
  SSLCACertificateFile <%= @ssldir %>/ca/ca_crt.pem
  SSLCARevocationFile <%= @ssldir %>/ca/ca_crl.pem
  SSLVerifyClient optional
  SSLVerifyDepth 1
  SSLOptions +StdEnvVars

  ServerName <%= name %>
  DocumentRoot <%= docroot %>
  RackAutoDetect On
  <Directory <%= docroot %>>
    Options None
    AllowOverride AuthConfig
    Order allow,deny
    allow from all
  </Directory>
  ErrorLog /var/log/<%= scope.lookupvar("apache::params::apache_name") %>/<%= name %>_error.log
  LogLevel warn
  CustomLog /var/log/<%= scope.lookupvar("apache::params::apache_name") %>/<%= name %>_access.log combined
  ServerSignature On
</VirtualHost>

Listen 127.0.0.1:8083

<VirtualHost 127.0.0.1:8083>
  RackAutoDetect On
  RackBaseURI /
  SetEnv RAILS_ENV production
  ServerName <%= name %>
  DocumentRoot <%= docroot %>
  <Directory <%= docroot %>>
    Options None
    AllowOverride None
    Order allow,deny
    allow from all
  </Directory>
  ErrorLog /var/log/<%= scope.lookupvar("apache::params::apache_name") %>/<%= name %>_upload_error.log
  LogLevel warn
  CustomLog /var/log/<%= scope.lookupvar("apache::params::apache_name") %>/<%= name %>_upload_access.log combined
  ServerSignature On
</VirtualHost>


